<!DOCTYPE html>
<html>
<head>
	<title>Add Step</title>

	<!-- Stylesheets -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- Insert this line above script imports  -->
	<script>if (typeof module === 'object') {
		window.module = module;
		module = undefined;
	}</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
<div class="container" style="padding: 8px">
	<form>
		<div class="form-group">
			<label for="action">Action:</label>
			<select class="form-control" id="action">
				<option>Focus</option>
				<option>Click</option>
				<option>Enter Text</option>
			</select>
		</div>
		<div class="form-group">
			<label for="selector">Selector:</label>
			<input type="text" class="form-control" id="selector" name="selector">
		</div>
		<div class="hidden form-group">
			<label for="text-value">Text:</label>
			<input type="text" class="form-control" id="text-value" name="text-value">
		</div>
		<div class="form-group">
			<label for="validation">Validation:</label>
			<textarea class="form-control" id="validation" name="validation" rows="5" ></textarea>
		</div>
		<div class="form-group">
			<button type="button" class="btn btn-primary" id="btn-save">Save</button>
		</div>
	</form>
</div>
<script>
	$(document).ready(function () {

		const args = window.__args__;

		const selector = args.id ? `#${args.id}` : args.path || '';
		$('#selector').val(selector);

		$('#btn-save').click(() => {
			const {ipcRenderer} = require('electron');

			const step = {
				action: $('#action').val(),
				selector: $('#selector').val()
			};

			ipcRenderer.send('add-step', step);

			// Close current window
			const remote = require('electron').remote;
			remote.getCurrentWindow().close();
		});
	})
</script>
</body>
</html>
